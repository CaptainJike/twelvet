server:
  port: 8085

spring:
  application:
    # 应用名称
    name: @artifactId@
  profiles:
    # 环境配置
    active: @active@
  cloud:
    nacos:
      discovery:
        # 解决获取IP为内网，一般微服务采用内网安全性、可用性高
        # ip: 127.0.0.1
        # 服务注册地址
        server-addr: ${NACOS_HOST:twelvet-nacos}:${NACOS_PORT:8848}
        namespace: @nacos.namespace@
      config:
        # 配置中心地址
        server-addr: ${spring.cloud.nacos.discovery.server-addr}
        # 配置文件格式
        file-extension: yml
        # 命名空间
        namespace: @nacos.namespace@
        # 配置组
        group: DEFAULT_GROUP
        # 共享配置
        shared-configs:
          - data-id: twelvet-app-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}
          - data-id: twelvet-mail-${spring.profiles.active}.${spring.cloud.nacos.config.file-extension}

    stream:
      rocketmq:
        binder:
          # 多个用;隔开
          name-server: twelvet-rocketmq:9876
          # 发送消息超时时间，单位：毫秒。默认为 3000 。
          send-message-timeout: 3000
          # 消息压缩阀值，当消息体的大小超过该阀值后，进行消息压缩。默认为 4 * 1024B
          compress-message-body-threshold: 4096
          # 消息体的最大允许大小。。默认为 4 * 1024 * 1024B
          max-message-size: 4194304
          # 同步发送消息时，失败重试次数。默认为 2 次。
          retry-times-when-send-failed: 2
          # 异步发送消息时，失败重试次数。默认为 2 次。
          retry-times-when-send-async-failed: 2
          # 发送消息给 Broker 时，如果发送失败，是否重试另外一台 Broker 。默认为 false
          retry-next-server: false
          # Access Key ，可阅读 https://github.com/apache/rocketmq/blob/master/docs/cn/acl/user_guide.md 文档
          access-key:
          # Secret Key
          secret-key:
          # 是否开启消息轨迹功能。默认为 true 开启。可阅读 https://github.com/apache/rocketmq/blob/master/docs/cn/msg_trace/user_guide.md 文档
          enable-msg-trace: true
          # 自定义消息轨迹的 Topic 。默认为 RMQ_SYS_TRACE_TOPIC 。
          customized-trace-topic: RMQ_SYS_TRACE_TOPIC
      # 注册函数式Bean
      function:
        # 多个;分割
        definition: loginLog;operationLog
      bindings:
        # <functionName> + -in- + <index> 注意编写格式  生产者
        loginLog-out-0:
          # topic
          destination: twelvet-log-login
          # 分组
          group: system
          # json类型
          contentType: application/json
          # 异步发送
          sync: true
          # 开启事物
          transactional: true
        # 消费者
        loginLog-in-0:
          # topic
          destination: twelvet-log-login
          # 文本类型
          content-type: text/plain
          group: system
          # 是否顺序消费，默认为 false 并发消费。
          orderly: true